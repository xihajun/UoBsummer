# Guide of preprocess_code
Most of our codes for preprecessing are in this file `preprocess_code.py`
## Requirement
In order to impliment it, it is necessary to install a bit requirements in advance which can be found in [`../requirements-py3.txt`](https://github.com/dj311/uob-summer-project/blob/master/requirements-py3.txt)
The hardest requirement should be install `clang` which is the most important package for our project.
## The usage of clang
In our project, we need to get ast tree for every C/C++ source code. This package `clang.cindex` provides us a way to generate `ast_root` from which we can walk all the children nodes in this ast tree.

## How to use the tree
When we get the tree, we want to number each tree in order to get an edgelist or something. 

But every time we run `get_children` for our nodes, it returns a new object which will lose information. So you can use `concretise_ast` to solve this problem. 

After that, we can number the node by using `number_ast_nodes`(start with `counter = 1`). It is easy to generate edgelist by using `generate_edgelist` funtion which walk the graph and generate the edgelist from `ast_root` generated by `clanng` before.

## Graph2vec

## Node2vec
Node2vec requires edgelist for each ast. So by simplily removing the features we get node2vec function named `process_for_node2vec` which can be used in `preprocess_all_for_adjmatrix` to get adj matrix and `preprocess_all_for_node2vec`.

### Adj matrix
The adjencency matrix is saved into the file `../data/adj.pickle`.

### Edglist
The outputs of all the edgelists are saved into other git repo named [`uob-summer-project-node2vec`](https://github.com/xihajun/uob-summer-project-node2vec).

## Dask
Since the data size is large, we use dask in our function named `preprocess_all_for_graph2vec` to do it seperately.

...continue

